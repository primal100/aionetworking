[Receiver]
Type=TCPServer
Host=127.0.0.1
Port=8888
SSL=False
SSLCert=
SSLKey=
Allowed_Senders=127.0.0.1

[Sender]
SrcIP=
SrcPort=0

[Dirs]
Home=${testdir}
Data=${Home}/data
Logs=${Home}/logs
Statistics=${HOME}/stats
SSL=${Home}/ssl
Recordings=${Data}/Recordings

[MessageManager]
Batch=False
Interval=0.001
GenerateTimestamp=False
Run_as=process
Actions=filestorage

[Protocol]
name=TCAP

[FileStorage]
path=


[Aliases]
127.0.0.1=localhost

[loggers]
keys=root,asyncio,app,app.main,app.raw,app.message,app.stats,app.actions

[handlers]
keys=${postfix},${postfix}_console,${postfix}_message,${postfix}_stats

[formatters]
keys=logFormatter,consoleFormatter,messageFormatter,${postfix}Stats

[filters]
keys=senderFilter

[logger_root]
level=ERROR
handlers=${postfix},${postfix}_console

[logger_asyncio]
level=DEBUG
handlers=${postfix},${postfix}_console
qualname=asyncio
propagate=0

[logger_app]
level=ERROR
handlers=${postfix},${postfix}_console
qualname=app
propagate=0

[logger_app.main]
level=DEBUG
handlers=${postfix},${postfix}_console
qualname=app.main
propagate=0

[logger_app.raw]
level=DEBUG
handlers=${postfix},${postfix}_console
qualname=app.raw
propagate=0

[logger_app.message]
level=DEBUG
handlers=${postfix}_message
qualname=app.message
propagate=0

[logger_app.stats]
level=INFO
handlers=${postfix}_stats
qualname=app.stats
propagate=0

[logger_app.actions]
level=DEBUG
handlers=${postfix},${postfix}_console
qualname=app.actions
propagate=0

[handler_receiver]
class=handlers.RotatingFileHandler
level=DEBUG
formatter=logFormatter
filename="${Dirs:Logs}/${Receiver:Type}_${Receiver:Port}.log"
kwargs={"filename": r${filename}, "mode": "w", "backupCount": 3}

[handler_sender]
class=handlers.RotatingFileHandler
level=ERROR
formatter=logFormatter
filename="${Dirs:Logs}/Sender_${Receiver:Port}.log"
kwargs={"filename": r${filename}, "mode": "w", "backupCount": 3}

[handler_receiver_console]
class=StreamHandler
level=INFO
formatter=consoleFormatter
args=(sys.stdout,)

[handler_sender_console]
class=StreamHandler
level=ERROR
formatter=consoleFormatter
args=(sys.stdout,)

[handler_receiver_message]
class=handlers.RotatingFileHandler
level=INFO
formatter=encoded
filename="${Dirs:Logs}/${Receiver:Type}_${Receiver:Port}_messages.log"
kwargs={"filename": r${filename}, "mode": "w", "backupCount": 3}

[handler_sender_message]
class=handlers.RotatingFileHandler
level=DEBUG
formatter=messageFormatter
filename="${Dirs:Logs}/${Receiver:Type}_${Receiver:Port}_messages.log"
kwargs={"filename": r${filename}, "mode": "w", "backupCount": 3}

[handler_receiver_stats]
class=handlers.RotatingFileHandler
level=INFO
formatter=receiverStats
filename="${Dirs:Statistics}/${Receiver:Type}_${Receiver:Port}.log"
kwargs={"filename": r${filename}, "mode": "a", "backupCount": 3}

[handler_sender_stats]
class=handlers.RotatingFileHandler
level=INFO
formatter=senderStats
filename="${Dirs:Statistics}/Sender_${Receiver:Port}.log"
kwargs={"filename": r${filename}, "mode": "a", "backupCount": 3}

[formatter_logFormatter]
format='%(asctime)s - %(relativeCreated)d - %(levelname)s - %(name)s - %(module)s - %(funcName)s - %(message)s'
datefmt=

[formatter_consoleFormatter]
format='%(message)s'
datefmt=

[formatter_receiverStats]
format='%(conn.alias)s  PROCESSED    %(conn.received_msgs)i %(conn.received_kbs)fKB %(conn.processing_time)s    %(conn.rate)sKB/s'

[formatter_senderStats]
format='%(conn.peer_ip)s   %(conn.peer_port)i   SENT    %(conn.sent_msgs)i  %(conn.sent_kbs)fKB'

[formatter_messageFormatter]
format='%(msg.pformat)s'

[filter_senderFilter]
class=sender_filter
loggers=app.main,app.raw,app.message,app.actions
senders=127.0.0.1,localhost

[filter_messageFilter]
class=message_filter
loggers=app.main,app.message,app.actions
attr=
value=
valuetype=str
operator=eq